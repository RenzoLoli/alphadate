---
import Layout from "@/layouts/Layout.astro";
import UserPhoto from "@/components/UserPhoto.astro";
import authGuard from "@/guards/auth.guard";
import authStorage from "@/store/auth.store";

const res = authGuard(Astro.url.pathname, Astro.redirect);
if (res) return res;

const user = authStorage.getUser();
---

<Layout title="Profile">
  <div
    class="flex flex-col lg:flex-row justify-center items-center gap-10 h-full"
  >
    <UserPhoto photo={user?.photo ?? ""} className="size-[250px] p-3" />
    <div class="flex flex-col gap-5">
      <label
        >Username: <input type="text" value={user?.username} disabled /></label
      >
      <label
        >Couplename: <input
          type="text"
          value={user?.couplename}
          disabled
        /></label
      >
      <label>Email: <input type="email" value={user?.email} disabled /></label>
      <label
        >Anniversary: <input
          type="date"
          value={user?.anniversary.toISOString().substring(0, 10)}
          disabled
        /></label
      >
    </div>
  </div>
</Layout>

<style scoped>
  input {
    width: 200px;
    float: right;
    margin-left: 15px;
  }
</style>
